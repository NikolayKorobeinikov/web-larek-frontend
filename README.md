# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
Приложение построено по архитектурному паттерну **MVP (Model-View-Presenter)**.  

- **Model** — бизнес-логика и данные;
- **View** — отображение и взаимодействие с DOM;
- **Presenter** — посредник, обрабатывающий события и управляющий обновлением модели и представления.


## Модели (Model)

### `ProductModel`
Модель для хранения и работы со списком товаров.

- **Поля:**
  - `products: IProduct[]` — массив товаров, полученных с сервера и сохранённых в модели.

- **Методы:**
  - `setProducts(products: IProduct[])` — сохраняет массив товаров в состоянии модели.
  - `getAll()` — возвращает весь сохранённый список товаров.
  - `getProductById(id: string)` — ищет и возвращает товар по его идентификатору.


### `CartModel`
Модель для управления содержимым корзины.

- **Поля:**
  - `cart: Record<string, number>` — объект, где ключ — ID товара, а значение — количество добавленных единиц.

- **Методы:**
  - `addToCart(id: string)` — увеличивает количество товара в корзине, либо добавляет его, если он отсутствует.
  - `removeFromCart(id: string)` — удаляет товар из корзины по ID.
  - `getItems()` — возвращает текущий список товаров в корзине.
  - `clearCart()` — полностью очищает корзину.


### `OrderModel`
Модель для хранения данных формы заказа и отправки заказа.

- **Поля:**
  - `formData: IOrderForm` — объект с данными покупателя (имя, телефон, адрес).

- **Методы:**
  - `setFormData(data: IOrderForm)` — сохраняет данные, введённые пользователем в форму.
  - `getFormData()` — возвращает текущие данные формы заказа.
  - `submit()` — отправляет заказ (реализация может включать вызов API).


## Представления (View)

### `ProductListView`
Отображает список товаров каталога.

- `render(products: IProduct[])` — отрисовывает карточки товаров.

### `CartView`
Отображает содержимое корзины.

- `render(items: IBasketItem[])` — показывает товары.
- `remove(handler)` — подписка на удаление товара.
- `submit(handler)` — подписка на оформление заказа.

### `OrderFormView`
Отображает форму заказа и предоставляет доступ к её данным.

- `render()` — отрисовывает форму.
- `bindSubmit(handler)` — подписка на отправку формы.
- `getFormData()` — получает значения из полей формы.

## Связь между слоями (Presenter)

Вся логика взаимодействия между `Model` и `View` реализована в файле `index.ts` с использованием `EventEmitter`.

`Presenter` слушает события от представлений (View), обновляет данные в моделях и инициирует перерисовку соответствующих компонентов.
       
